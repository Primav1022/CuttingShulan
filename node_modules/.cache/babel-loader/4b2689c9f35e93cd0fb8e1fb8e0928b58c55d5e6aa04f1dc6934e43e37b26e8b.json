{"ast":null,"code":"var _jsxFileName = \"F:\\\\\\u540C\\u6D4E\\u5B9E\\u4E60\\\\cutting\\\\src\\\\components\\\\SketchBox\\\\remake.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Remake = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const [canvas, setCanvas] = useState(null);\n  const [images, setImages] = useState([]);\n  useEffect(() => {\n    const newCanvas = new fabric.Canvas(canvasRef.current);\n    setCanvas(newCanvas);\n  }, []);\n  useEffect(() => {\n    if (canvas) {\n      canvas.setWidth(canvasRef.current.clientWidth);\n      canvas.setHeight(canvasRef.current.clientHeight);\n      canvas.renderAll();\n    }\n  }, [canvas]);\n  const handleDrop = event => {\n    event.preventDefault();\n    const files = event.dataTransfer.files;\n    if (files.length > 0 && files[0].type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const img = new Image();\n        img.src = e.target.result;\n        img.onload = () => {\n          const fabricImage = new fabric.Image(img);\n          fabricImage.scaleToWidth(canvas.getWidth() / 3);\n          canvas.add(fabricImage);\n          setImages(prevImages => [...prevImages, fabricImage]);\n        };\n      };\n      reader.readAsDataURL(files[0]);\n    }\n  };\n  const handleDragOver = event => {\n    event.preventDefault();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onDrop: handleDrop,\n    onDragOver: handleDragOver,\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      overflow: 'hidden',\n      height: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        border: '1px solid black',\n        height: '80%',\n        width: '80%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(Remake, \"uKZBGwrKAsRTMLlV5lagIb4TspE=\");\n_c = Remake;\nexport default Remake;\nvar _c;\n$RefreshReg$(_c, \"Remake\");","map":{"version":3,"names":["React","useRef","useState","useEffect","fabric","jsxDEV","_jsxDEV","Remake","_s","canvasRef","canvas","setCanvas","images","setImages","newCanvas","Canvas","current","setWidth","clientWidth","setHeight","clientHeight","renderAll","handleDrop","event","preventDefault","files","dataTransfer","length","type","startsWith","reader","FileReader","onload","e","img","Image","src","target","result","fabricImage","scaleToWidth","getWidth","add","prevImages","readAsDataURL","handleDragOver","onDrop","onDragOver","style","display","justifyContent","alignItems","overflow","height","children","ref","border","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/同济实习/cutting/src/components/SketchBox/remake.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst Remake = () => {\r\n    const canvasRef = useRef(null);\r\n    const [canvas, setCanvas] = useState(null);\r\n    const [images, setImages] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const newCanvas = new fabric.Canvas(canvasRef.current);\r\n        setCanvas(newCanvas);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (canvas) {\r\n            canvas.setWidth(canvasRef.current.clientWidth);\r\n            canvas.setHeight(canvasRef.current.clientHeight);\r\n            canvas.renderAll();\r\n        }\r\n    }, [canvas]);\r\n\r\n    const handleDrop = (event) => {\r\n        event.preventDefault();\r\n        const files = event.dataTransfer.files;\r\n        if (files.length > 0 && files[0].type.startsWith('image/')) {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                const img = new Image();\r\n                img.src = e.target.result;\r\n                img.onload = () => {\r\n                    const fabricImage = new fabric.Image(img);\r\n                    fabricImage.scaleToWidth(canvas.getWidth() / 3);\r\n                    canvas.add(fabricImage);\r\n                    setImages((prevImages) => [...prevImages, fabricImage]);\r\n                };\r\n            };\r\n            reader.readAsDataURL(files[0]);\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    return (\r\n        <div\r\n            onDrop={handleDrop}\r\n            onDragOver={handleDragOver}\r\n            style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                overflow: 'hidden',\r\n                height: '100vh',\r\n            }}\r\n        >\r\n            <canvas\r\n                ref={canvasRef}\r\n                style={{ border: '1px solid black', height: '80%', width: '80%' }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Remake;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}