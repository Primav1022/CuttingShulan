{"ast":null,"code":"var _jsxFileName = \"F:\\\\\\u540C\\u6D4E\\u5B9E\\u4E60\\\\cutting\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// App.js\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport './App.css';\nimport GenerationImg from './containers/GenerationImg/GenerationImg';\nimport Makeunit from './containers/Makeunit/Makeunit';\nimport MakeContionous from './containers/MakeContinuous/MakeContinuous';\nimport ShowClothes from './containers/ShowClothes/ShowClothes';\nimport localForage from \"localforage\";\nimport LoadingAnimation from \"./components/loadingicon/loadingicon\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  useEffect(() => {\n    // 检查并清理存储的数据\n    const keysToClear = ['generatedImages']; // 列出所有你想清理的key\n    keysToClear.forEach(key => {\n      localForage.getItem(key).then(value => {\n        if (value !== null) {\n          console.log(`Clearing data for key: ${key}`);\n          localForage.removeItem(key).then(() => {\n            console.log(`Data cleared for key: ${key}`);\n          }).catch(err => {\n            console.error(`Error clearing data for key: ${key}`, err);\n          });\n        }\n      });\n    });\n  }, []);\n  const [spacing, setSpacing] = useState(10); // 初始间距\n\n  // 增加间距\n  const [selectedColor, setSelectedColor] = useState('#FFFFFF'); // 默认为白色\n  const [savedPatternDataURL, setSavedPatternDataURL] = useState(null);\n  const makeContinuousRef = useRef(null);\n  const handlePatternSave = useCallback(dataURL => {\n    setSavedPatternDataURL(dataURL);\n  }, []);\n  const [selectedMaterials, setSelectedMaterials] = useState([]);\n  const [sketchDataURL, setSketchDataURL] = useState(null);\n  const handleAddMaterial = newMaterial => {\n    setSelectedMaterials(prevMaterials => [...prevMaterials, newMaterial]);\n  };\n  const [currentStep, setCurrentStep] = useState(1);\n  const handleNextStep = () => {\n    setCurrentStep(currentStep < 4 ? currentStep + 1 : 4);\n  };\n  const handlePrevStep = () => {\n    setCurrentStep(currentStep > 1 ? currentStep - 1 : 1);\n  };\n  const handleSaveSketch = dataURL => {\n    setSketchDataURL(dataURL);\n  };\n  const [connectionType, setConnectionType] = useState('平接');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content\",\n    children: [/*#__PURE__*/_jsxDEV(LoadingAnimation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this), currentStep === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(GenerationImg, {\n        currentStep: currentStep,\n        handleNextStep: handleNextStep,\n        handlePrevStep: handlePrevStep,\n        selectedMaterials: selectedMaterials,\n        onAddMaterial: handleAddMaterial\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }, this), currentStep === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Makeunit, {\n        currentStep: currentStep,\n        handleNextStep: handleNextStep,\n        handlePrevStep: handlePrevStep,\n        selectedMaterials: selectedMaterials,\n        onAddMaterial: handleAddMaterial,\n        onSaveSketch: handleSaveSketch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }, this), currentStep === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MakeContionous, {\n        connectionType: connectionType,\n        setConnectionType: setConnectionType,\n        spacing: spacing,\n        selectedColor: selectedColor,\n        setSelectedColor: setSelectedColor,\n        setSpacing: setSpacing,\n        ref: makeContinuousRef,\n        currentStep: currentStep,\n        handleNextStep: handleNextStep,\n        handlePrevStep: handlePrevStep,\n        onSaveSketch: handleSaveSketch,\n        sketchDataURL: sketchDataURL,\n        onSave: handlePatternSave\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }, this), currentStep === 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(ShowClothes, {\n        spacing: spacing,\n        setSpacing: setSpacing,\n        patternDataURL: savedPatternDataURL,\n        currentStep: currentStep,\n        handleNextStep: handleNextStep,\n        handlePrevStep: handlePrevStep,\n        sketchDataURL: sketchDataURL\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MakeContionous, {\n        connectionType: connectionType,\n        patternDataURL: savedPatternDataURL,\n        setConnectionType: setConnectionType,\n        selectedColor: selectedColor,\n        spacing: spacing,\n        setSpacing: setSpacing,\n        ref: makeContinuousRef,\n        currentStep: currentStep,\n        handleNextStep: handleNextStep,\n        handlePrevStep: handlePrevStep,\n        onSaveSketch: handleSaveSketch,\n        sketchDataURL: sketchDataURL,\n        onSave: handlePatternSave,\n        style: {\n          visibility: 'hidden',\n          position: 'absolute',\n          left: '-9999px' // 将组件移至屏幕外，确保不占用布局空间\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"W2dVIYZLth1lYS0z9/Pw9mUJcm8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","GenerationImg","Makeunit","MakeContionous","ShowClothes","localForage","LoadingAnimation","jsxDEV","_jsxDEV","App","_s","keysToClear","forEach","key","getItem","then","value","console","log","removeItem","catch","err","error","spacing","setSpacing","selectedColor","setSelectedColor","savedPatternDataURL","setSavedPatternDataURL","makeContinuousRef","handlePatternSave","dataURL","selectedMaterials","setSelectedMaterials","sketchDataURL","setSketchDataURL","handleAddMaterial","newMaterial","prevMaterials","currentStep","setCurrentStep","handleNextStep","handlePrevStep","handleSaveSketch","connectionType","setConnectionType","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onAddMaterial","onSaveSketch","ref","onSave","patternDataURL","style","visibility","position","left","_c","$RefreshReg$"],"sources":["F:/同济实习/cutting/src/App.js"],"sourcesContent":["// App.js\r\nimport React, {useState, useRef, useCallback, useEffect} from 'react';\r\nimport './App.css';\r\n\r\nimport GenerationImg from './containers/GenerationImg/GenerationImg';\r\nimport Makeunit from './containers/Makeunit/Makeunit';\r\nimport MakeContionous from './containers/MakeContinuous/MakeContinuous';\r\nimport ShowClothes from './containers/ShowClothes/ShowClothes';\r\nimport localForage from \"localforage\";\r\nimport LoadingAnimation from \"./components/loadingicon/loadingicon\";\r\n\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    // 检查并清理存储的数据\r\n    const keysToClear = ['generatedImages']; // 列出所有你想清理的key\r\n    keysToClear.forEach(key => {\r\n      localForage.getItem(key).then(value => {\r\n        if (value !== null) {\r\n          console.log(`Clearing data for key: ${key}`);\r\n          localForage.removeItem(key).then(() => {\r\n            console.log(`Data cleared for key: ${key}`);\r\n          }).catch(err => {\r\n            console.error(`Error clearing data for key: ${key}`, err);\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }, []);\r\n  const [spacing, setSpacing] = useState(10); // 初始间距\r\n\r\n// 增加间距\r\n  const [selectedColor, setSelectedColor] = useState('#FFFFFF'); // 默认为白色\r\n  const [savedPatternDataURL, setSavedPatternDataURL] = useState(null);\r\n\r\n  const makeContinuousRef=useRef(null);\r\n \r\n    const handlePatternSave = useCallback((dataURL) => {\r\n        setSavedPatternDataURL(dataURL);\r\n    }, []);\r\n\r\n\r\n  const [selectedMaterials, setSelectedMaterials] = useState([]);\r\n  const [sketchDataURL, setSketchDataURL] = useState(null); \r\n  const handleAddMaterial = (newMaterial) => {\r\n    setSelectedMaterials(prevMaterials => [...prevMaterials, newMaterial]);\r\n  };\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n\r\n  const handleNextStep = () => {\r\n    setCurrentStep(currentStep < 4 ? currentStep + 1 : 4);\r\n  };\r\n\r\n  const handlePrevStep = () => {\r\n    setCurrentStep(currentStep > 1 ? currentStep - 1 : 1);\r\n};\r\n\r\n  const handleSaveSketch = (dataURL) => {\r\n    setSketchDataURL(dataURL); \r\n  };\r\n  const [connectionType, setConnectionType] = useState('平接');\r\n\r\n  return (\r\n    <div className=\"content\">\r\n   <LoadingAnimation/>\r\n      {currentStep === 1 && <div>\r\n        <GenerationImg currentStep={currentStep} handleNextStep={handleNextStep} handlePrevStep={handlePrevStep} selectedMaterials={selectedMaterials} onAddMaterial={handleAddMaterial}/>\r\n        </div>}\r\n      {currentStep === 2 && <div>\r\n        <Makeunit currentStep={currentStep} handleNextStep={handleNextStep} handlePrevStep={handlePrevStep} selectedMaterials={selectedMaterials} onAddMaterial={handleAddMaterial}  onSaveSketch={handleSaveSketch}/>\r\n      </div>}\r\n      {currentStep === 3 && <div>\r\n        <MakeContionous connectionType={connectionType}  setConnectionType={setConnectionType} spacing={spacing} selectedColor={selectedColor}  setSelectedColor={setSelectedColor} setSpacing={setSpacing} ref={makeContinuousRef} currentStep={currentStep} handleNextStep={handleNextStep} handlePrevStep={handlePrevStep} onSaveSketch={handleSaveSketch} sketchDataURL={sketchDataURL} onSave={handlePatternSave}/>\r\n      </div>}\r\n      {currentStep === 4 && <div>\r\n        <ShowClothes spacing={spacing} setSpacing={setSpacing}  patternDataURL={savedPatternDataURL} currentStep={currentStep} handleNextStep={handleNextStep} handlePrevStep={handlePrevStep} sketchDataURL={sketchDataURL}/>\r\n        <MakeContionous  connectionType={connectionType} patternDataURL={savedPatternDataURL}  setConnectionType={setConnectionType} selectedColor={selectedColor} spacing={spacing} setSpacing={setSpacing} ref={makeContinuousRef} currentStep={currentStep} handleNextStep={handleNextStep} handlePrevStep={handlePrevStep} onSaveSketch={handleSaveSketch} sketchDataURL={sketchDataURL} onSave={handlePatternSave}\r\n                        style={{\r\n                          visibility: 'hidden',\r\n                          position: 'absolute',\r\n                          left: '-9999px', // 将组件移至屏幕外，确保不占用布局空间\r\n                        }}/>\r\n    </div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}