{"ast":null,"code":"var _jsxFileName = \"F:\\\\\\u540C\\u6D4E\\u5B9E\\u4E60\\\\cutting\\\\src\\\\components\\\\SketchBox\\\\remake.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FabricCanvas() {\n  _s();\n  const canvasRef = useRef(null);\n  const fabricCanvasRef = useRef(null);\n  const deleteIconRef = useRef(null);\n  useEffect(() => {\n    if (!fabricCanvasRef.current) {\n      fabricCanvasRef.current = new fabric.Canvas(canvasRef.current, {\n        width: window.innerHeight * 0.6,\n        height: window.innerHeight * 0.6,\n        selection: true,\n        preserveObjectStacking: true,\n        interactive: true\n      });\n      fabricCanvasRef.current.add(new fabric.Text('Hello, Fabric.js!', {\n        left: 50,\n        top: 50\n      }));\n      fabric.Object.prototype.transparentCorners = false;\n      fabric.Object.prototype.cornerColor = 'blue';\n      fabric.Object.prototype.cornerStyle = 'circle';\n      const deleteIcon = \"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E\";\n      const img = document.createElement('img');\n      img.src = deleteIcon;\n      fabric.Object.prototype.controls.deleteControl = new fabric.Control({\n        x: 0.5,\n        y: -0.5,\n        offsetY: 16,\n        cursorStyle: 'pointer',\n        mouseUpHandler: deleteObject,\n        render: renderIcon,\n        cornerSize: 24\n      });\n      function renderIcon(ctx, left, top, styleOverride, fabricObject) {\n        const size = this.cornerSize;\n        ctx.save();\n        ctx.translate(left, top);\n        ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\n        ctx.drawImage(img, -size / 2, -size / 2, size, size);\n        ctx.restore();\n      }\n      function deleteObject(eventData, transform) {\n        const target = transform.target;\n        const canvas = target.canvas;\n        canvas.remove(target);\n        canvas.requestRenderAll();\n      }\n      function loadCanvasState() {\n        // Implement your canvas state loading logic here\n      }\n      loadCanvasState();\n    }\n    return () => {\n      fabricCanvasRef.current.dispose();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 12\n  }, this);\n}\n_s(FabricCanvas, \"GI4ptiE4cemO9BbfEaYJH9NLfYQ=\");\n_c = FabricCanvas;\nexport default FabricCanvas;\nvar _c;\n$RefreshReg$(_c, \"FabricCanvas\");","map":{"version":3,"names":["React","useRef","useEffect","fabric","jsxDEV","_jsxDEV","FabricCanvas","_s","canvasRef","fabricCanvasRef","deleteIconRef","current","Canvas","width","window","innerHeight","height","selection","preserveObjectStacking","interactive","add","Text","left","top","Object","prototype","transparentCorners","cornerColor","cornerStyle","deleteIcon","img","document","createElement","src","controls","deleteControl","Control","x","y","offsetY","cursorStyle","mouseUpHandler","deleteObject","render","renderIcon","cornerSize","ctx","styleOverride","fabricObject","size","save","translate","rotate","util","degreesToRadians","angle","drawImage","restore","eventData","transform","target","canvas","remove","requestRenderAll","loadCanvasState","dispose","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/同济实习/cutting/src/components/SketchBox/remake.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nfunction FabricCanvas() {\r\n    const canvasRef = useRef(null);\r\n    const fabricCanvasRef = useRef(null);\r\n    const deleteIconRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!fabricCanvasRef.current) {\r\n            fabricCanvasRef.current = new fabric.Canvas(canvasRef.current, {\r\n                width: window.innerHeight * 0.6,\r\n                height: window.innerHeight * 0.6,\r\n                selection: true,\r\n                preserveObjectStacking: true,\r\n                interactive: true,\r\n            });\r\n\r\n            fabricCanvasRef.current.add(new fabric.Text('Hello, Fabric.js!', { left: 50, top: 50 }));\r\n\r\n            fabric.Object.prototype.transparentCorners = false;\r\n            fabric.Object.prototype.cornerColor = 'blue';\r\n            fabric.Object.prototype.cornerStyle = 'circle';\r\n\r\n            const deleteIcon = \"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E\";\r\n\r\n            const img = document.createElement('img');\r\n            img.src = deleteIcon;\r\n\r\n            fabric.Object.prototype.controls.deleteControl = new fabric.Control({\r\n                x: 0.5,\r\n                y: -0.5,\r\n                offsetY: 16,\r\n                cursorStyle: 'pointer',\r\n                mouseUpHandler: deleteObject,\r\n                render: renderIcon,\r\n                cornerSize: 24\r\n            });\r\n\r\n            function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n                const size = this.cornerSize;\r\n                ctx.save();\r\n                ctx.translate(left, top);\r\n                ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\r\n                ctx.drawImage(img, -size/2, -size/2, size, size);\r\n                ctx.restore();\r\n            }\r\n\r\n            function deleteObject(eventData, transform) {\r\n                const target = transform.target;\r\n                const canvas = target.canvas;\r\n                canvas.remove(target);\r\n                canvas.requestRenderAll();\r\n            }\r\n\r\n            function loadCanvasState() {\r\n                // Implement your canvas state loading logic here\r\n            }\r\n\r\n            loadCanvasState();\r\n        }\r\n\r\n        return () => {\r\n            fabricCanvasRef.current.dispose();\r\n        };\r\n    }, []);\r\n\r\n    return <canvas ref={canvasRef} />;\r\n}\r\n\r\nexport default FabricCanvas;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}