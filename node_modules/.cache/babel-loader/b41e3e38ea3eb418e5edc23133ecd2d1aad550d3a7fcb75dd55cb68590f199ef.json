{"ast":null,"code":"var _jsxFileName = \"F:\\\\\\u540C\\u6D4E\\u5B9E\\u4E60\\\\cutting\\\\src\\\\components\\\\SketchBox\\\\remake.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Remake = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const canvasSize = {\n    width: 512,\n    height: 512\n  };\n  useEffect(() => {\n    const canvas = new fabric.Canvas(canvasRef.current, {\n      width: canvasSize.width,\n      height: canvasSize.height,\n      backgroundColor: 'white'\n    });\n\n    // 处理拖放事件\n    const handleDrop = event => {\n      event.preventDefault();\n      const files = event.dataTransfer.files;\n      if (files.length > 0 && files[0].type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          const img = new Image();\n          img.src = e.target.result;\n          img.onload = () => {\n            const fabricImage = new fabric.Image(img);\n            fabricImage.scaleToWidth(canvasSize.width / 3); // 调整图片大小为Canvas大小的三分之一\n            canvas.add(fabricImage);\n            canvas.setActiveObject(fabricImage);\n          };\n        };\n        reader.readAsDataURL(files[0]);\n      }\n    };\n\n    // 允许拖放\n    const handleDragOver = event => {\n      event.preventDefault();\n    };\n\n    // 添加事件监听器\n    canvasRef.current.addEventListener('drop', handleDrop);\n    canvasRef.current.addEventListener('dragover', handleDragOver);\n\n    // 添加缩放按钮\n    const zoomInButton = document.createElement('button');\n    zoomInButton.textContent = 'Zoom In';\n    zoomInButton.onclick = () => {\n      canvas.setZoom(canvas.getZoom() * 1.1);\n      canvas.requestRenderAll();\n    };\n    canvasRef.current.parentNode.appendChild(zoomInButton);\n    const zoomOutButton = document.createElement('button');\n    zoomOutButton.textContent = 'Zoom Out';\n    zoomOutButton.onclick = () => {\n      canvas.setZoom(canvas.getZoom() / 1.1);\n      canvas.requestRenderAll();\n    };\n    canvasRef.current.parentNode.appendChild(zoomOutButton);\n\n    // 清理副作用\n    return () => {\n      canvasRef.current.removeEventListener('drop', handleDrop);\n      canvasRef.current.removeEventListener('dragover', handleDragOver);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      overflow: 'hidden',\n      height: '60vh',\n      position: 'relative'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        border: '1px solid black'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(Remake, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n_c = Remake;\nexport default Remake;\nvar _c;\n$RefreshReg$(_c, \"Remake\");","map":{"version":3,"names":["React","useRef","useEffect","fabric","jsxDEV","_jsxDEV","Remake","_s","canvasRef","canvasSize","width","height","canvas","Canvas","current","backgroundColor","handleDrop","event","preventDefault","files","dataTransfer","length","type","startsWith","reader","FileReader","onload","e","img","Image","src","target","result","fabricImage","scaleToWidth","add","setActiveObject","readAsDataURL","handleDragOver","addEventListener","zoomInButton","document","createElement","textContent","onclick","setZoom","getZoom","requestRenderAll","parentNode","appendChild","zoomOutButton","removeEventListener","style","display","justifyContent","alignItems","overflow","position","children","ref","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/同济实习/cutting/src/components/SketchBox/remake.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst Remake = () => {\r\n    const canvasRef = useRef(null);\r\n    const canvasSize = { width: 512, height: 512 };\r\n\r\n    useEffect(() => {\r\n        const canvas = new fabric.Canvas(canvasRef.current, {\r\n            width: canvasSize.width,\r\n            height: canvasSize.height,\r\n            backgroundColor: 'white',\r\n        });\r\n\r\n        // 处理拖放事件\r\n        const handleDrop = (event) => {\r\n            event.preventDefault();\r\n            const files = event.dataTransfer.files;\r\n            if (files.length > 0 && files[0].type.startsWith('image/')) {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                    const img = new Image();\r\n                    img.src = e.target.result;\r\n                    img.onload = () => {\r\n                        const fabricImage = new fabric.Image(img);\r\n                        fabricImage.scaleToWidth(canvasSize.width / 3); // 调整图片大小为Canvas大小的三分之一\r\n                        canvas.add(fabricImage);\r\n                        canvas.setActiveObject(fabricImage);\r\n                    };\r\n                };\r\n                reader.readAsDataURL(files[0]);\r\n            }\r\n        };\r\n\r\n        // 允许拖放\r\n        const handleDragOver = (event) => {\r\n            event.preventDefault();\r\n        };\r\n\r\n        // 添加事件监听器\r\n        canvasRef.current.addEventListener('drop', handleDrop);\r\n        canvasRef.current.addEventListener('dragover', handleDragOver);\r\n\r\n        // 添加缩放按钮\r\n        const zoomInButton = document.createElement('button');\r\n        zoomInButton.textContent = 'Zoom In';\r\n        zoomInButton.onclick = () => {\r\n            canvas.setZoom(canvas.getZoom() * 1.1);\r\n            canvas.requestRenderAll();\r\n        };\r\n        canvasRef.current.parentNode.appendChild(zoomInButton);\r\n\r\n        const zoomOutButton = document.createElement('button');\r\n        zoomOutButton.textContent = 'Zoom Out';\r\n        zoomOutButton.onclick = () => {\r\n            canvas.setZoom(canvas.getZoom() / 1.1);\r\n            canvas.requestRenderAll();\r\n        };\r\n        canvasRef.current.parentNode.appendChild(zoomOutButton);\r\n\r\n        // 清理副作用\r\n        return () => {\r\n            canvasRef.current.removeEventListener('drop', handleDrop);\r\n            canvasRef.current.removeEventListener('dragover', handleDragOver);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                overflow: 'hidden',\r\n                height: '60vh',\r\n                position: 'relative',\r\n            }}\r\n        >\r\n            <canvas\r\n                ref={canvasRef}\r\n                style={{ border: '1px solid black' }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Remake;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}